<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Teaching with Interactive Data Visualization</title><link href="http://walkerke.github.io/" rel="alternate"></link><link href="http://walkerke.github.io/feeds/maps.atom.xml" rel="self"></link><id>http://walkerke.github.io/</id><updated>2015-04-29T00:00:00-05:00</updated><entry><title>Should you visualize data with a map or a chart? Thoughts from teaching introductory geography</title><link href="http://walkerke.github.io/2015/04/map-or-chart/" rel="alternate"></link><updated>2015-04-29T00:00:00-05:00</updated><author><name>Kyle Walker</name></author><id>tag:walkerke.github.io,2015-04-29:2015/04/map-or-chart/</id><summary type="html">&lt;p&gt;While studying geography for many years as an undergraduate and graduate student, my main connection to the world of data visualization was through the worlds of cartography and Geographic Information Systems (GIS).  I learned about basic principles of data visualization in my geography courses, but it was always through the lens of mapmaking.  As such, when considering how to visualize a dataset, I have always turned to mapping first.  Unfortunately, this has led me over the course of my career to make several maps that in retrospect would have worked better as charts.  &lt;/p&gt;
&lt;p&gt;Several top names in the visualization community that I follow have recently given attention to this "map vs. chart" debate.  &lt;a href="https://twitter.com/briantimoney"&gt;Brian Timoney&lt;/a&gt; &lt;a href="http://mapbrief.com/2014/11/13/the-elegant-effective-election-data-visualization-that-is-thankfully-not-a-map/"&gt;writes here on when "the best map is no map"&lt;/a&gt;; &lt;a href="https://twitter.com/jschwabish"&gt;Jon Schwabish&lt;/a&gt; and &lt;a href="https://twitter.com/BenChartoff"&gt;Ben Chartoff&lt;/a&gt; &lt;a href="http://policyviz.com/talking-maps-with-ben-chartoff/"&gt;had an interesting discussion on this topic available by podcast&lt;/a&gt;; and I recently noticed &lt;a href="https://twitter.com/arnicas/status/592008102947495936"&gt;this dot plot by&lt;/a&gt; &lt;a href="https://twitter.com/arnicas"&gt;Lynn Cherny&lt;/a&gt; which is a remake of a &lt;a href="https://twitter.com/_cingraham"&gt;Christopher Ingraham&lt;/a&gt; &lt;a href="http://www.washingtonpost.com/blogs/wonkblog/wp/2015/04/24/where-americans-drink-the-hardest/"&gt;map from the &lt;em&gt;Washington Post&lt;/em&gt;&lt;/a&gt;.  All of these accounts suggest that in many instances, a map is not the best visualization choice - or at the very least, it is important to consider other options.  &lt;/p&gt;
&lt;p&gt;As a geographer, most datasets I work with in my teaching and research can be mapped.  I generally follow a couple rules of thumb when deciding whether to map my data: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Is there a clear geographic pattern that I want to highlight in my dataset?  &lt;/li&gt;
&lt;li&gt;Do I have enough data to highlight that geographic pattern effectively?  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If the answer is no on either account, I generally go with a chart instead of a map.  However, the answers to these questions are not always so clear in practice, which came up as I was preparing materials to teach my introductory geography students about income inequality in sub-Saharan Africa.  I wanted to show students country-level variations in the &lt;a href="http://en.wikipedia.org/wiki/Gini_coefficient"&gt;Gini Index&lt;/a&gt;, which is a common statistic used to measure income inequality.  Higher Gini values are reflective of more income inequality within a society.  I used &lt;a href="http://data.worldbank.org/indicator/SI.POV.GINI"&gt;data from the World Bank&lt;/a&gt; to accomplish this.  If you are an RStudio user, this workflow is fully reproducible by issuing the following command at the R console: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;source&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://raw.githubusercontent.com/walkerke/teaching-with-datavis/master/map-or-chart/gini.R&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can also &lt;a href="https://github.com/walkerke/teaching-with-datavis/blob/master/map-or-chart/gini.R"&gt;click here to view the source code directly&lt;/a&gt;. Please note that there are several packages needed to run the script, and that I am using a development branch of the &lt;strong&gt;leaflet&lt;/strong&gt; package to create the legend on the map, installable with &lt;code&gt;devtools::install_github('rstudio/leaflet@feature/color-legend')&lt;/code&gt;.  I include a few hacks to get the legend looking the way I want, and as this is using a development branch of the package, the API is likely to change.  &lt;/p&gt;
&lt;p&gt;I'll start with an interactive Leaflet choropleth map.  Click a country to retrieve its most recent Gini index estimate, its overall rank, and the year the estimate was made.  If you have sourced the R script, type &lt;code&gt;gini_map&lt;/code&gt; in your R console to create the map yourself.  Also, you can &lt;a href="http://walkerke.github.io/teaching-with-datavis/map-or-chart/gini.html"&gt;click here for a full-screen version&lt;/a&gt;.  &lt;/p&gt;
&lt;iframe src="http://walkerke.github.io/teaching-with-datavis/map-or-chart/gini.html" scrolling = "no" frameBorder = "0" height = "500" width = "800"&gt;&lt;/iframe&gt;

&lt;p&gt;In several ways, the map serves its purpose.  The context of my discussion was income inequality in southern sub-Saharan Africa; the map highlights the high levels of inequality in these countries, and I can zoom/pan around and click the countries to interactively explore country values and ranks.  &lt;/p&gt;
&lt;p&gt;However, there are several issues with this map.  First, while the Mercator projection used by most web maps is fine for many purposes, &lt;a href="https://www.youtube.com/watch?v=eLqC3FNNOaI"&gt;it is not good for showing the entire world&lt;/a&gt; due to the areal distortion of countries, and especially bad when that map is a choropleth.  An alternative would be to use a different mapping library like D3, &lt;a href="http://bl.ocks.org/mbostock/3682676"&gt;which can handle better projections for the world&lt;/a&gt;; however, other issues remain.  For one, there is a fair amount of missing data, which is especially problematic for large countries on the map like Libya and Saudi Arabia, as it skews the interpretation of geographic patterns.  Also, the data themselves don't easily lend themselves to country-level comparisons on a map in which the area of countries is emphasized.  For example: what is the most unequal country in the world, according to the World Bank's Gini index estimate?  The answer is the &lt;a href="http://en.wikipedia.org/wiki/Seychelles"&gt;Seychelles&lt;/a&gt;, a small archipelago in the Indian Ocean that is invisible at the default zoom level of the map.  To see the Seychelles, the user has to zoom way in... &lt;/p&gt;
&lt;p&gt;&lt;img src=http://walkerke.github.io/teaching-with-datavis/map-or-chart/seychelles.PNG&gt;&lt;/p&gt;
&lt;p&gt;...which then makes every other country impossible to see.  &lt;/p&gt;
&lt;p&gt;For these reasons, I sought an alternative way to visualize the data.  One very popular chart type in the visualization community right now is the Cleveland-style dot plot.  My favorite implementation of the dot plot comes from &lt;a href="https://twitter.com/evergreendata"&gt;Stephanie Evergreen&lt;/a&gt; &lt;a href="http://stephanieevergreen.com/easy-dot-plots-in-excel/"&gt;(see her Excel tutorial here)&lt;/a&gt;.  I used &lt;strong&gt;ggplot2&lt;/strong&gt; to create an "Evergreen-style" dot plot with the Gini index data, which is found below.  If you have sourced my R script, type &lt;code&gt;gini_chart&lt;/code&gt; in your R console to reproduce the chart.  Click the chart if you'd like a larger version.    &lt;/p&gt;
&lt;p&gt;&lt;a href="http://walkerke.github.io/teaching-with-datavis/map-or-chart/gini_coef.png"&gt;&lt;img src=http://walkerke.github.io/teaching-with-datavis/map-or-chart/gini_coef.png style="width: 800px"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This chart solves a lot of the problems with the map.  It only includes the countries with the 20 highest Gini indices, which is what I was focusing on anyway; all countries are represented with the same symbol, which allows for better comparisons between countries of different sizes; geography is still represented by the color of the dots; and the relative values are much clearer in relationship to one another.  &lt;/p&gt;
&lt;p&gt;However, it is crucial to consider the context in which I am presenting this chart.  If I was sharing the data with a highly geographically-literate community (e.g. in a policy discussion), the chart is probably the way to go.  But what about an introductory-level university geography course?  I can't reasonably assume that my students have heard of all of these countries, especially the smaller ones, much less be able to situate them geographically.  In turn, I need to provide them with a spatial reference, which takes me back to... you guessed it, the map.  In spite of its faults, the Leaflet choropleth slippy map can make the data relatable, as its template (the world map) is familiar, the tile layer provides a nice reference, and the interface is friendly given everyone's use of Google Maps.  In class, I opted for a compromise, and used both the map and the chart.  I first showed the map to discuss general patterns and explore the data, and then showed the chart once I had appropriately introduced the geographical context. &lt;/p&gt;
&lt;p&gt;More broadly, I do think these discussions about the appropriateness of mapping for visualizing spatial datasets are important, and ought to be a central component of geography/GIS education.  To that end, &lt;a href="http://personal.tcu.edu/kylewalker/preview.html"&gt;I'm teaching a new geography course at TCU in the fall that focuses on general data and visualization skills&lt;/a&gt;, and is intended to serve as a complement to our GIS courses.  We'll be spending our fair share of time considering this map vs. chart issue in the course.  &lt;/p&gt;
&lt;p&gt;If you have any questions or feedback, I'd love to hear from you!  I'm on Twitter at &lt;a href="https://twitter.com/kyle_e_walker"&gt;@kyle_e_walker&lt;/a&gt;.  &lt;/p&gt;</summary><category term="R"></category><category term="World Regional"></category></entry><entry><title>Mapping religious adherence in the US with CartoDB</title><link href="http://walkerke.github.io/2015/02/religion/" rel="alternate"></link><updated>2015-02-26T00:00:00-06:00</updated><author><name>Kyle Walker</name></author><id>tag:walkerke.github.io,2015-02-26:2015/02/religion/</id><summary type="html">&lt;p&gt;&lt;strong&gt;Update 2/26: changes made after conversations with Steven Romalewski on Twitter.  For the previous version of the post, check my GitHub version history.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Before coming to TCU, I worked as a data analyst for the &lt;a href="https://www.cpg.org/"&gt;Church Pension Group&lt;/a&gt;, which manages the retirement funds and provides other financial services for the Episcopal Church.  I was part of a small research group that completed both internal and public-facing studies using the company's data.  &lt;a href="https://www.cpg.org/global/research/reports-statistics/"&gt;You can take a look at some of the studies I worked on here&lt;/a&gt;.  While I was at CPG, I developed an interest in the sociology of religion, as changing rates of religious adherence were of critical importance to CPG's work, as they impact the overall viability of parishes (and in turn the fiscal health of the Church).  During this time, data for the &lt;a href="http://www.rcms2010.org/"&gt;2010 US Religion Census (or Religious Congregations and Membership Study, abbreviated as RCMS)&lt;/a&gt; started to become available.  As the US Census does not ask questions about religion, researchers interested in studying religion must turn to other data sources like these.  &lt;/p&gt;
&lt;p&gt;I never had the opportunity to really dig into this dataset while at CPG, as I left for my current position at TCU shortly afterward.  However, as I teach about the geography of religious adherence (defined here as the proportion of the population actively practicing a religion) in my World Regional Geography course, I took the opportunity to dive back into the data.  I was inspired by &lt;a href="http://www.glenmary.org/rcms2010/"&gt;this map from the Glenmary Research Center&lt;/a&gt; which maps the top religious family by county in the United States.  This map is excellent, but I wanted an interactive version that I could explore with my students in class (and that they could explore outside of class).  However, I did really like the bivariate cartographic technique they used to present the data (&lt;a href="http://www.joshuastevens.net/cartography/make-a-bivariate-choropleth-map/"&gt;see this post from Joshua Stevens for a great overview of bivariate mapping&lt;/a&gt;).  In this instance, the top religious group in each county is assigned a color; then, the intensity of the color is related to the adherence percentage for that group.  This makes sense; if two counties have Catholic as their top group, but one has an adherence of 75 percent as opposed to 20 percent for the other, they should not be represented the same way.  &lt;/p&gt;
&lt;p&gt;There are many other examples of this type of cartographic approach.  Some excellent examples have come from &lt;a href="https://twitter.com/SR_spatial"&gt;Steven Romalewski&lt;/a&gt; and CUNY's Center for Urban Research, where they have mapped &lt;a href="http://www.urbanresearchmaps.org/comparinator/pluralitymap.htm"&gt;demographic change&lt;/a&gt; and &lt;a href="http://www.electionatlas.nyc/maps.html#!interactive"&gt;election results&lt;/a&gt;.  I use the demographic map in my teaching every semester to discuss issues of gentrification and demographic inversion in metropolitan areas.  In the CUNY maps, the qualitative color of a feature represents the most prevalent group (e.g. race) and then the intensity of the hue represents its relative value (the percentage represented by that racial group).  &lt;/p&gt;
&lt;p&gt;A related approach is &lt;strong&gt;value-by-alpha&lt;/strong&gt;, which works in a similar way in that the color of a feature represents one attribute, and its opacity represents an equalizing attribute, like total population.  You can read more about &lt;a href="https://twitter.com/awoodruff"&gt;Andy Woodruff's&lt;/a&gt; fine work on the topic &lt;a href="http://andywoodruff.com/blog/how-to-make-a-value-by-alpha-map/"&gt;here&lt;/a&gt;, &lt;a href="http://andywoodruff.com/blog/value-by-alpha-maps/"&gt;here&lt;/a&gt;, and &lt;a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3173776/"&gt;here&lt;/a&gt;.  &lt;/p&gt;
&lt;p&gt;I borrow from these approaches to map religious adherence by county using &lt;a href="http://cartodb.com/"&gt;CartoDB&lt;/a&gt;, a phenomenal web-based platform for creating interactive maps.  CartoDB's functionality ranges from the creation of simple maps with a user-friendly web UI to actual GIS functionality using its PostGIS backend with spatial SQL.  Here is the map I created; below, I'll explain how I did it!  Use the arrows button in the upper left to pop the map out to full screen; &lt;a href="http://kwalkertcu.cartodb.com/viz/dfe2d3b2-a0da-11e4-a315-0e4fddd5de28/embed_map"&gt;click here if you'd like a direct link to the map.&lt;/a&gt;  &lt;/p&gt;
&lt;iframe width='100%' height='600' frameborder='0' src='http://kwalkertcu.cartodb.com/viz/dfe2d3b2-a0da-11e4-a315-0e4fddd5de28/embed_map' allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;The map shows the top religious adherence group by county, with some key differences from the Glenmary map; I classified the data as Catholic, Evangelical Protestant, Latter-Day Saints (Mormon), Mainline Protestant, and Black Protestant.  No other major category was the top group in the lower 48 states plus DC.  I used R to process the data; I won't go into detail about that here, but you can &lt;a href="https://github.com/walkerke/teaching-with-datavis/blob/master/religion/religion2.R"&gt;view the code in my GitHub repository&lt;/a&gt;.  The whole process can be reproduced by &lt;a href="https://github.com/walkerke/teaching-with-datavis/tree/master/religion"&gt;cloning the repo&lt;/a&gt;, running the script, and zipping up the new shapefile &lt;code&gt;cty_religion&lt;/code&gt; for uploading to CartoDB. &lt;/p&gt;
&lt;p&gt;Uploading your data to CartoDB is straightforward: once your data are in the right format (in this instance, in the form of a zipped shapefile), just sign in and drag and drop!  Once your data have loaded, CartoDB includes a number of "wizards" you can use to style your data in a very user-friendly way.  For more complex visualizations, however, you can use &lt;a href="https://www.mapbox.com/tilemill/docs/manual/carto/"&gt;CartoCSS&lt;/a&gt;.  CartoCSS, which is also used by MapBox Studio (another new favorite of mine), is a CSS-like syntax for styling map data.  It also makes bivariate visualizations possible.  To style the map, I grabbed some colors from &lt;a href="http://colorbrewer2.org/"&gt;ColorBrewer&lt;/a&gt; and used the following syntax: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nf"&gt;#cty_religion&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#FFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
   &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
   &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;opacity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;religion&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Evangelical&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#e41a1c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;religion&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Catholic&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#377eb8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;religion&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Mainline&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#4daf4a&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;religion&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;LDS&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#984ea3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;religion&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;African-American&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#ff7f00&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;percent&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nt"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;opacity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;percent&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nt"&gt;20&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;opacity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;percent&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nt"&gt;30&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;opacity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nf"&gt;#cty_religion&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nt"&gt;percent&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nt"&gt;40&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;polygon&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;opacity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The &lt;code&gt;polygon-fill&lt;/code&gt; method is used to style my data by religious category with colors; the &lt;code&gt;polygon-opacity&lt;/code&gt; method then adjusts the opacity of the features, which then blend with the light-gray CartoDB basemap to show relative intensity.  I used, roughly, a quantile classification scheme with four bins (with some slight rounding to 20, 30, and 40) for this.  The map, I feel, shows clear trends in religious adherence in the US.  The South is the Evangelical center of the country; Catholicism is more prevalent along the US/Mexico border and in the Northeast, Utah is a Mormon stronghold, and Mainline Protestantism predominates in the Upper Midwest.   The bivariate approach also gives the viewer a sense of the relative religiosity of different places; whereas Utah and the Southeast appear to have much stronger adherence to their top religious groups, the opacity of features in the Northwest suggests lower religiosity there (or at least no group that is significant numbers-wise).  &lt;/p&gt;
&lt;p&gt;There is a lot more I'd like to do with this map; here are some ideas: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I've restricted this to the lower 48 states plus DC; Alaska and Hawaii should be added.  &lt;/li&gt;
&lt;li&gt;I'd like a better legend that shows variation in intensity as well as hue; I experimented with this a little but couldn't quite get anything satisfactory working.  &lt;/li&gt;
&lt;li&gt;It would be great to have an interactive chart appear upon clicking each county that shows the overall distribution of each group; this is beyond my current CartoDB.js skills but something to consider for a future iteration.  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you have any comments or questions, please let me know!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thanks to:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Steven Romalewski and the CUNY Center for Urban Research for their innovative approaches to bivariate mapping&lt;/li&gt;
&lt;li&gt;Andy Woodruff and others for resources on the value-by-alpha technique&lt;/li&gt;
&lt;li&gt;CartoDB&lt;/li&gt;
&lt;li&gt;The &lt;a href="http://www.thearda.com/"&gt;Association of Religion Data Archives&lt;/a&gt; for providing free access to the RCMS data&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.nhgis.org"&gt;NHGIS&lt;/a&gt; at the University of Minnesota for the spatial data&lt;/li&gt;
&lt;li&gt;The Glenmary Research Center for inspiring this map&lt;/li&gt;
&lt;/ul&gt;</summary><category term="CartoDB"></category><category term="R"></category><category term="World Regional"></category></entry></feed>